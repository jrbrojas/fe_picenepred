import{r as k,i as f,j as t,a as g,H as K,b as T,S as b,c as R,D as E,d as M,u as v,e as H,f as w,g as L,h as V,k as O}from"./index-Dg9LI47u.js";import{L as U}from"./Logo-rkNfrj3C.js";import{M as p}from"./index-ORXFMKtC.js";import{S as C}from"./ScrollBar-DsGqA0A2.js";import{a as $,N as F,A as P,n as A,b as Y,u as I,c as B,H as G,U as W,M as q}from"./UserProfileDropdown-CFRl0H9Z.js";import{V as z}from"./VerticalMenuContent-DwNIBhfL.js";import{H as J,a as Q}from"./isNil-CvUXYOp_.js";import{L as X}from"./LayoutBase-ZxsD8wQs.js";import"./index-gDDr9ysX.js";import"./index-BKNjMPK8.js";import"./classNames-C_19Q5Yu.js";const Z=l=>{const{onChange:a,routeKey:s,activeKeys:r,onSetActiveKey:c,direction:d,navigationTree:n,userAuthority:o,mode:u,selectedMenu:m,t:y,...x}=l,{includedRouteTree:i}=$(n,s),S=({key:e,title:h,menu:_,translateKey:D})=>{a({title:h,menu:_,translateKey:D}),c([e])},j=({key:e})=>{a({}),c([e])};k.useEffect(()=>{i.type!==F&&!f(i)&&a({key:i.key,title:i.title,menu:i.subMenu,translateKey:i.translateKey})},[i.key]);const N=r&&r.length>0?r:f(m)?[]:[i.key];return t.jsxs("div",{...x,children:[t.jsx(g,{to:T.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:K},children:t.jsx(U,{imgClass:"max-h-10",mode:u,type:"streamline",className:b})}),t.jsx(C,{autoHide:!0,direction:d,children:t.jsx(p,{className:"px-4 pb-4",defaultActiveKeys:N,children:n.map(e=>t.jsx(P,{authority:e.authority,userAuthority:o,children:t.jsx("div",{title:y(e.translateKey,e.title),children:e.subMenu&&e.subMenu.length>0?t.jsx(p.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>S({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:t.jsx("div",{className:"text-2xl",children:A[e.icon]})}):t.jsx(g,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>j({key:e.key}),children:t.jsx(p.MenuItem,{eventKey:e.key,className:"mb-2",children:t.jsx("div",{className:"text-2xl",children:A[e.icon]})})})})},e.key))})})]})},ee=l=>{const{className:a,title:s,menu:r,routeKey:c,onCollapse:d,direction:n,translationSetup:o,userAuthority:u,...m}=l,y=()=>{d()};return t.jsxs("div",{className:R("h-full",a),...m,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:K},children:[t.jsx("h5",{className:"font-bold",children:s}),t.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[n===E&&t.jsx(J,{}),n===M&&t.jsx(Q,{})]})]}),t.jsx(C,{autoHide:!0,className:"h-[calc(100%-64px)]",direction:n,children:t.jsx(z,{routeKey:c,navigationTree:r,translationSetup:o,userAuthority:u})})]})},te={width:L},se=({translationSetup:l=T.activeNavTranslation})=>{const{t:a}=Y(!l),[s,r]=k.useState({}),[c,d]=k.useState([]),n=v(e=>e.mode),o=v(e=>e.direction),u=H(e=>e.currentRouteKey),m=w(e=>e.user.authority),{larger:y}=I(),x=(e,h)=>`${e}-${h}`,i=e=>{r(e)},S=()=>{r({}),d([])},j=e=>{d(e)},N=()=>{let e={};const h="-270px";return o===E&&(e={marginLeft:h}),o===M&&(e={marginRight:h}),e};return t.jsx(t.Fragment,{children:y.md&&t.jsxs("div",{className:"stacked-side-nav",children:[t.jsx(Z,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",n)}`,style:te,routeKey:u,activeKeys:c,mode:n,direction:o,navigationTree:B,userAuthority:m||[],selectedMenu:s,t:a,onChange:i,onSetActiveKey:j}),t.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",n)}`,style:{width:V,...f(s)?N():{}},children:!f(s)&&t.jsx(ee,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:u,direction:o,translationSetup:l,userAuthority:m||[],onCollapse:S})})]})})},ye=({children:l})=>{const{larger:a,smaller:s}=I();return t.jsx(X,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:t.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&t.jsx(se,{}),t.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[t.jsx(G,{className:"shadow-sm dark:shadow-2xl",headerStart:t.jsx(t.Fragment,{children:s.lg&&t.jsx(q,{})}),headerEnd:t.jsx(t.Fragment,{children:t.jsx(W,{hoverable:!1})})}),t.jsx("div",{className:"h-full flex flex-auto flex-col",children:l})]})]})})};export{ye as default};
