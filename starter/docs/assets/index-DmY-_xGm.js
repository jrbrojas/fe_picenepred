import{r as B,E as D,Z as L,$ as k,j as e,c as A,u as q}from"./index-Dg9LI47u.js";import{u as M,F as T,a as j,C as b,t as _,z as m,b as f,A as v,c as d}from"./useTimeOutMessage-8Si_Wots.js";import{I as H,B as Q}from"./FormContainer-CViOm8Vn.js";import{P as G}from"./PasswordInput-CNmewPD8.js";import{L as O}from"./Logo-rkNfrj3C.js";import"./classNames-C_19Q5Yu.js";import"./isNil-CvUXYOp_.js";const U=m.object({email:m.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:m.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),N="postLoginRedirect",w=r=>{var h,u,p;const[a,s]=B.useState(!1),{disableSubmit:t=!1,className:n,setMessage:i,passwordHint:x}=r,{handleSubmit:y,formState:{errors:o},control:g}=M({defaultValues:{email:"admin-01@ecme.com",password:"123Qwe"},resolver:_(U)}),{signIn:S}=D(),I=L(),C=k(),E=async l=>{if(!t){s(!0);try{const c=await S(l);if((c==null?void 0:c.status)==="failed"){i==null||i(c.message||"Credenciales inválidas");return}const R=new URLSearchParams(C.search).get("next")||"",P=localStorage.getItem(N)||"",F=R||P||"/";localStorage.removeItem(N),I(F,{replace:!0})}finally{s(!1)}}};return e.jsx("div",{className:n,children:e.jsxs(T,{onSubmit:y(E),children:[e.jsx(j,{label:"Correo",invalid:!!o.email,errorMessage:(h=o.email)==null?void 0:h.message,children:e.jsx(b,{name:"email",control:g,render:({field:l})=>e.jsx(H,{type:"email",placeholder:"Email",autoComplete:"off",...l})})}),e.jsx(j,{label:"Contraseña",invalid:!!o.password,errorMessage:(u=o.password)==null?void 0:u.message,className:A(x?"mb-0":"",(p=o.password)!=null&&p.message?"mb-8":""),children:e.jsx(b,{name:"password",control:g,rules:{required:!0},render:({field:l})=>e.jsx(G,{type:"text",placeholder:"Password",autoComplete:"off",...l})})}),x,e.jsx(Q,{block:!0,loading:a,variant:"solid",type:"submit",children:a?"Ingresando...":"Ingresar"})]})})},z=({signUpUrl:r="/sign-up",forgetPasswordUrl:a="/forgot-password",disableSubmit:s})=>{const[t,n]=f();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("img",{src:"/img/logo/logo-cenepred.jpg",alt:"CENEPRED",className:"h-24 md:h-24 w-auto object-contain"})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("img",{src:"/img/logo/logo_sigrid.png",alt:"SIGRID",className:"h-12",onClick:()=>window.location.href="https://sigrid.cenepred.gob.pe/sigridv3/"})})]})})}),e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#0097a7] mb-2",children:"Sistema CENEPRED"}),e.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-700",children:"¡Bienvenido de vuelta!"}),e.jsx("p",{className:"font-medium text-gray-600",children:"Ingrese sus credenciales para acceder al sistema"})]}),t&&e.jsx(v,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:t})}),e.jsx(w,{disableSubmit:s,setMessage:n,passwordHint:e.jsx("div",{className:"mb-7 mt-2",children:e.jsx(d,{to:a,className:"font-semibold text-[#0097a7] mt-2 underline hover:text-[#00838f]",themeColor:!1,children:"¿Olvidó su contraseña?"})})}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.jsx("strong",{children:"Centro Nacional de Estimación, Prevención y Reducción del Riesgo de Desastres"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sistema de Gestión Institucional para la Reducción del Riesgo de Desastres"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left",children:[e.jsx("h4",{className:"text-sm font-semibold text-[#0097a7] mb-2",children:"Credenciales de Prueba:"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Admin:"})," admin@cenepred.gob.pe / cenepred123"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Usuario:"})," usuario@cenepred.gob.pe / 123456"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Template:"})," admin-01@ecme.com / 123Qwe"]})]})]})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["¿No tiene una cuenta?"," "]}),e.jsx(d,{to:r,className:"text-[#0097a7] font-bold hover:text-[#00838f]",themeColor:!1,children:"Solicitar acceso"})]})]})},ee=()=>e.jsx(z,{}),se=({forgetPasswordUrl:r="/forgot-password",disableSubmit:a})=>{const[s,t]=f(),n=q(i=>i.mode);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx(O,{type:"streamline",mode:n,imgClass:"mx-auto",logoWidth:60})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"mb-2",children:"Bienvenido!"}),e.jsx("p",{className:"font-semibold heading-text",children:"Coloque sus credenciales"})]}),s&&e.jsx(v,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx("span",{className:"break-all",children:s})}),e.jsx(w,{disableSubmit:a,setMessage:t,passwordHint:e.jsx("div",{className:"mb-7 mt-2",children:e.jsx(d,{to:r,className:"font-semibold heading-text mt-2 underline",themeColor:!1,children:"Recuperar Contraseña"})})})]})};export{se as SignInBase,ee as default};
