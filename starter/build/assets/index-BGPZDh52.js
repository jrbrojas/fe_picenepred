import{r as _,s as xe,E as ve,Z as be,$ as je,j as n,c as Se,u as we}from"./index-B9SakHDJ.js";import{u as Re,F as _e,a as oe,C as se,t as Ne,z as W,b as le,A as pe,c as G}from"./useTimeOutMessage-BoMnsuvs.js";import{I as Oe,B as Ee}from"./FormContainer-C1Kmf1G3.js";import{P as Ie}from"./PasswordInput-EXauKNy6.js";import{P as m}from"./index-SOnCENrJ.js";import{L as Le}from"./Logo-BfT7cPc5.js";import"./classNames-4Y-pPo2N.js";import"./isNil-DJibyYR0.js";var Pe=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function V(){return V=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},V.apply(this,arguments)}function Ce(e,o){if(e==null)return{};var s={},r=Object.keys(e),t,c;for(c=0;c<r.length;c++)t=r[c],!(o.indexOf(t)>=0)&&(s[t]=e[t]);return s}function P(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,K(e,o)}function K(e,o){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},K(e,o)}var C=function(e){Ae(o,e);function o(){var r;return r=e.call(this)||this,r.handleExpired=r.handleExpired.bind(P(r)),r.handleErrored=r.handleErrored.bind(P(r)),r.handleChange=r.handleChange.bind(P(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(P(r)),r}var s=o.prototype;return s.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},s.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},s.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},s.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},s.executeAsync=function(){var t=this;return new Promise(function(c,S){t.executionResolve=c,t.executionReject=S,t.execute()})},s.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},s.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},s.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},s.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},s.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},s.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=t(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},s.componentDidMount=function(){this.explicitRender()},s.componentDidUpdate=function(){this.explicitRender()},s.handleRecaptchaRef=function(t){this.captcha=t},s.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var c=Ce(t,Pe);return _.createElement("div",V({},c,{ref:this.handleRecaptchaRef}))},o}(_.Component);C.displayName="ReCAPTCHA";C.propTypes={sitekey:m.string.isRequired,onChange:m.func,grecaptcha:m.object,theme:m.oneOf(["dark","light"]),type:m.oneOf(["image","audio"]),tabindex:m.number,onExpired:m.func,onErrored:m.func,size:m.oneOf(["compact","normal","invisible"]),stoken:m.string,hl:m.string,badge:m.oneOf(["bottomright","bottomleft","inline"]),isolated:m.bool};C.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var ue={exports:{}},i={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=typeof Symbol=="function"&&Symbol.for,J=l?Symbol.for("react.element"):60103,X=l?Symbol.for("react.portal"):60106,A=l?Symbol.for("react.fragment"):60107,$=l?Symbol.for("react.strict_mode"):60108,T=l?Symbol.for("react.profiler"):60114,F=l?Symbol.for("react.provider"):60109,D=l?Symbol.for("react.context"):60110,ee=l?Symbol.for("react.async_mode"):60111,k=l?Symbol.for("react.concurrent_mode"):60111,M=l?Symbol.for("react.forward_ref"):60112,U=l?Symbol.for("react.suspense"):60113,$e=l?Symbol.for("react.suspense_list"):60120,z=l?Symbol.for("react.memo"):60115,H=l?Symbol.for("react.lazy"):60116,Te=l?Symbol.for("react.block"):60121,Fe=l?Symbol.for("react.fundamental"):60117,De=l?Symbol.for("react.responder"):60118,ke=l?Symbol.for("react.scope"):60119;function y(e){if(typeof e=="object"&&e!==null){var o=e.$$typeof;switch(o){case J:switch(e=e.type,e){case ee:case k:case A:case T:case $:case U:return e;default:switch(e=e&&e.$$typeof,e){case D:case M:case H:case z:case F:return e;default:return o}}case X:return o}}}function fe(e){return y(e)===k}i.AsyncMode=ee;i.ConcurrentMode=k;i.ContextConsumer=D;i.ContextProvider=F;i.Element=J;i.ForwardRef=M;i.Fragment=A;i.Lazy=H;i.Memo=z;i.Portal=X;i.Profiler=T;i.StrictMode=$;i.Suspense=U;i.isAsyncMode=function(e){return fe(e)||y(e)===ee};i.isConcurrentMode=fe;i.isContextConsumer=function(e){return y(e)===D};i.isContextProvider=function(e){return y(e)===F};i.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===J};i.isForwardRef=function(e){return y(e)===M};i.isFragment=function(e){return y(e)===A};i.isLazy=function(e){return y(e)===H};i.isMemo=function(e){return y(e)===z};i.isPortal=function(e){return y(e)===X};i.isProfiler=function(e){return y(e)===T};i.isStrictMode=function(e){return y(e)===$};i.isSuspense=function(e){return y(e)===U};i.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A||e===k||e===T||e===$||e===U||e===$e||typeof e=="object"&&e!==null&&(e.$$typeof===H||e.$$typeof===z||e.$$typeof===F||e.$$typeof===D||e.$$typeof===M||e.$$typeof===Fe||e.$$typeof===De||e.$$typeof===ke||e.$$typeof===Te)};i.typeOf=y;ue.exports=i;var Me=ue.exports,te=Me,Ue={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ze={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},He={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},he={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},re={};re[te.ForwardRef]=He;re[te.Memo]=he;function ae(e){return te.isMemo(e)?he:re[e.$$typeof]||Ue}var qe=Object.defineProperty,Be=Object.getOwnPropertyNames,ie=Object.getOwnPropertySymbols,We=Object.getOwnPropertyDescriptor,Ge=Object.getPrototypeOf,ce=Object.prototype;function me(e,o,s){if(typeof o!="string"){if(ce){var r=Ge(o);r&&r!==ce&&me(e,r,s)}var t=Be(o);ie&&(t=t.concat(ie(o)));for(var c=ae(e),S=ae(o),p=0;p<t.length;++p){var u=t[p];if(!ze[u]&&!(s&&s[u])&&!(S&&S[u])&&!(c&&c[u])){var b=We(o,u);try{qe(e,u,b)}catch{}}}}return e}var Ve=me;const Ke=xe(Ve);function Q(){return Q=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Q.apply(this,arguments)}function Qe(e,o){if(e==null)return{};var s={},r=Object.keys(e),t,c;for(c=0;c<r.length;c++)t=r[c],!(o.indexOf(t)>=0)&&(s[t]=e[t]);return s}function Ze(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o}var j={},Ye=0;function Je(e,o){return o=o||{},function(r){var t=r.displayName||r.name||"Component",c=function(p){Ze(u,p);function u(f,d){var a;return a=p.call(this,f,d)||this,a.state={},a.__scriptURL="",a}var b=u.prototype;return b.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+Ye++),this.__scriptLoaderID},b.setupScriptURL=function(){return this.__scriptURL=typeof e=="function"?e():e,this.__scriptURL},b.asyncScriptLoaderHandleLoad=function(d){var a=this;this.setState(d,function(){return a.props.asyncScriptOnLoad&&a.props.asyncScriptOnLoad(a.state)})},b.asyncScriptLoaderTriggerOnScriptLoaded=function(){var d=j[this.__scriptURL];if(!d||!d.loaded)throw new Error("Script is not loaded.");for(var a in d.observers)d.observers[a](d);delete window[o.callbackName]},b.componentDidMount=function(){var d=this,a=this.setupScriptURL(),g=this.asyncScriptLoaderGetScriptLoaderID(),x=o,I=x.globalName,O=x.callbackName,E=x.scriptId;if(I&&typeof window[I]<"u"&&(j[a]={loaded:!0,observers:{}}),j[a]){var R=j[a];if(R&&(R.loaded||R.errored)){this.asyncScriptLoaderHandleLoad(R);return}R.observers[g]=function(h){return d.asyncScriptLoaderHandleLoad(h)};return}var w={};w[g]=function(h){return d.asyncScriptLoaderHandleLoad(h)},j[a]={loaded:!1,observers:w};var v=document.createElement("script");v.src=a,v.async=!0;for(var q in o.attributes)v.setAttribute(q,o.attributes[q]);E&&(v.id=E);var L=function(N){if(j[a]){var ye=j[a],B=ye.observers;for(var ne in B)N(B[ne])&&delete B[ne]}};O&&typeof window<"u"&&(window[O]=function(){return d.asyncScriptLoaderTriggerOnScriptLoaded()}),v.onload=function(){var h=j[a];h&&(h.loaded=!0,L(function(N){return O?!1:(N(h),!0)}))},v.onerror=function(){var h=j[a];h&&(h.errored=!0,L(function(N){return N(h),!0}))},document.body.appendChild(v)},b.componentWillUnmount=function(){var d=this.__scriptURL;if(o.removeOnUnmount===!0)for(var a=document.getElementsByTagName("script"),g=0;g<a.length;g+=1)a[g].src.indexOf(d)>-1&&a[g].parentNode&&a[g].parentNode.removeChild(a[g]);var x=j[d];x&&(delete x.observers[this.asyncScriptLoaderGetScriptLoaderID()],o.removeOnUnmount===!0&&delete j[d])},b.render=function(){var d=o.globalName,a=this.props;a.asyncScriptOnLoad;var g=a.forwardedRef,x=Qe(a,["asyncScriptOnLoad","forwardedRef"]);return d&&typeof window<"u"&&(x[d]=typeof window[d]<"u"?window[d]:void 0),x.ref=g,_.createElement(r,x)},u}(_.Component),S=_.forwardRef(function(p,u){return _.createElement(c,Q({},p,{forwardedRef:u}))});return S.displayName="AsyncScriptLoader("+t+")",S.propTypes={asyncScriptOnLoad:m.func},Ke(S,r)}}var Z="onloadcallback",Xe="grecaptcha";function Y(){return typeof window<"u"&&window.recaptchaOptions||{}}function et(){var e=Y(),o=e.useRecaptchaNet?"recaptcha.net":"www.google.com";return e.enterprise?"https://"+o+"/recaptcha/enterprise.js?onload="+Z+"&render=explicit":"https://"+o+"/recaptcha/api.js?onload="+Z+"&render=explicit"}const tt=Je(et,{callbackName:Z,globalName:Xe,attributes:Y().nonce?{nonce:Y().nonce}:{}})(C),rt=W.object({email:W.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:W.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),de="postLoginRedirect",ge=e=>{var O,E,R;const[o,s]=_.useState(!1),[r,t]=_.useState(null),{disableSubmit:c=!1,className:S,setMessage:p,passwordHint:u}=e,{handleSubmit:b,formState:{errors:f},control:d}=Re({defaultValues:{email:"admin-01@ecme.com",password:"123Qwe"},resolver:Ne(rt)}),{signIn:a}=ve(),g=be(),x=je(),I=async w=>{if(!c){if(!r){p==null||p("Por favor complete el reCAPTCHA antes de continuar.");return}s(!0);try{const v=await a(w);if((v==null?void 0:v.status)==="failed"){p==null||p(v.message||"Credenciales inválidas");return}const L=new URLSearchParams(x.search).get("next")||"",h=localStorage.getItem(de)||"",N=L||h||"/";localStorage.removeItem(de),g(N,{replace:!0})}finally{s(!1)}}};return n.jsx("div",{className:S,children:n.jsxs(_e,{onSubmit:b(I),children:[n.jsx(oe,{label:"Correo",invalid:!!f.email,errorMessage:(O=f.email)==null?void 0:O.message,children:n.jsx(se,{name:"email",control:d,render:({field:w})=>n.jsx(Oe,{type:"email",placeholder:"Email",autoComplete:"off",...w})})}),n.jsx(oe,{label:"Contraseña",invalid:!!f.password,errorMessage:(E=f.password)==null?void 0:E.message,className:Se(u?"mb-0":"",(R=f.password)!=null&&R.message?"mb-8":""),children:n.jsx(se,{name:"password",control:d,rules:{required:!0},render:({field:w})=>n.jsx(Ie,{type:"text",placeholder:"Password",autoComplete:"off",...w})})}),u,n.jsx("div",{className:"my-4 flex justify-center",children:n.jsx(tt,{sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onChange:w=>t(w)})}),n.jsx(Ee,{block:!0,loading:o,variant:"solid",type:"submit",children:o?"Ingresando...":"Ingresar"})]})})},nt=({signUpUrl:e="/sign-up",forgetPasswordUrl:o="/forgot-password",disableSubmit:s})=>{const[r,t]=le();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("img",{src:"/img/logo/logo-cenepred.jpg",alt:"CENEPRED",className:"h-24 md:h-24 w-auto object-contain"})}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("img",{src:"/img/logo/logo_sigrid.png",alt:"SIGRID",className:"h-12",onClick:()=>window.location.href="https://sigrid.cenepred.gob.pe/sigridv3/"})})]})})}),n.jsxs("div",{className:"mb-10 text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-[#0097a7] mb-2",children:"Sistema CENEPRED"}),n.jsx("h2",{className:"text-lg font-semibold mb-2 text-gray-700",children:"¡Bienvenido de vuelta!"}),n.jsx("p",{className:"font-medium text-gray-600",children:"Ingrese sus credenciales para acceder al sistema"})]}),r&&n.jsx(pe,{showIcon:!0,className:"mb-4",type:"danger",children:n.jsx("span",{className:"break-all",children:r})}),n.jsx(ge,{disableSubmit:s,setMessage:t,passwordHint:n.jsx("div",{className:"mb-7 mt-2",children:n.jsx(G,{to:o,className:"font-semibold text-[#0097a7] mt-2 underline hover:text-[#00838f]",themeColor:!1,children:"¿Olvidó su contraseña?"})})}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:n.jsx("strong",{children:"Centro Nacional de Estimación, Prevención y Reducción del Riesgo de Desastres"})}),n.jsx("p",{className:"text-xs text-gray-500",children:"Sistema de Gestión Institucional para la Reducción del Riesgo de Desastres"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left",children:[n.jsx("h4",{className:"text-sm font-semibold text-[#0097a7] mb-2",children:"Credenciales de Prueba:"}),n.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Admin:"})," admin@cenepred.gob.pe / cenepred123"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Usuario:"})," usuario@cenepred.gob.pe / 123456"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Template:"})," admin-01@ecme.com / 123Qwe"]})]})]})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsxs("span",{className:"text-sm text-gray-600",children:["¿No tiene una cuenta?"," "]}),n.jsx(G,{to:e,className:"text-[#0097a7] font-bold hover:text-[#00838f]",themeColor:!1,children:"Solicitar acceso"})]})]})},ut=()=>n.jsx(nt,{}),ft=({forgetPasswordUrl:e="/forgot-password",disableSubmit:o})=>{const[s,r]=le(),t=we(c=>c.mode);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-8",children:n.jsx(Le,{type:"streamline",mode:t,imgClass:"mx-auto",logoWidth:60})}),n.jsxs("div",{className:"mb-10",children:[n.jsx("h2",{className:"mb-2",children:"Bienvenido!"}),n.jsx("p",{className:"font-semibold heading-text",children:"Coloque sus credenciales"})]}),s&&n.jsx(pe,{showIcon:!0,className:"mb-4",type:"danger",children:n.jsx("span",{className:"break-all",children:s})}),n.jsx(ge,{disableSubmit:o,setMessage:r,passwordHint:n.jsx("div",{className:"mb-7 mt-2",children:n.jsx(G,{to:e,className:"font-semibold heading-text mt-2 underline",themeColor:!1,children:"Recuperar Contraseña"})})})]})};export{ft as SignInBase,ut as default};
